# ETPS Configuration
# Enterprise-Grade Talent Positioning System

# Application settings
app:
  name: "ETPS"
  version: "0.1.0"
  environment: "development"  # development | staging | production

# CORS settings
cors:
  allowed_origins:
    - "http://localhost:3000"
    - "http://localhost:3001"
    - "http://127.0.0.1:3000"
    - "http://127.0.0.1:3001"
    - "https://projects.benjaminblack.consulting"  # Production origin
  allowed_methods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
  allowed_headers:
    - "Content-Type"
    - "Authorization"
  allow_credentials: true

# Rate limiting settings
rate_limiting:
  enabled: true
  generation_endpoints:
    limit: "10/minute"  # 10 requests per minute for generation endpoints
    endpoints:
      - "/api/v1/resume/generate"
      - "/api/v1/resume/docx"
      - "/api/v1/cover-letter/generate"
      - "/api/v1/cover-letter/docx"
  read_endpoints:
    limit: "60/minute"  # 60 requests per minute for read endpoints

# Error handling settings
error_handling:
  sanitize_errors: true  # Remove file paths and stack traces from error responses
  include_error_id: true  # Include unique error ID for tracking

# Model configuration (API keys via environment variables)
models:
  premium_model: "claude-sonnet-4-20250514"
  fallback_model: "gpt-4o"
  embedding_model: "text-embedding-3-small"
  scoring_model: "claude-haiku"

# ATS and Critic settings
critic:
  max_iterations: 3
  ats_score_threshold: 75
  strictness: "high"  # low | medium | high

# Cover letter defaults
cover_letter:
  default_style: "standard"  # standard | executive | ultra-tight | custom
  word_counts:
    standard: 300
    executive: 250
    ultra_tight: 175

# Database settings
database:
  sqlite_path: "./etps.db"

# Vector store settings (Qdrant)
vector_store:
  host: "localhost"
  port: 6333
  collection_prefix: "etps_"
  auto_index_on_startup: true
  batch_size: 50

# Embeddings configuration
embeddings:
  similarity_threshold: 0.60  # Minimum cosine similarity for semantic matches (tuned for OpenAI text-embedding-3-small)
  batch_size: 100             # Maximum batch size for embedding generation
  vector_dimensions: 384      # text-embedding-3-small dimension
  index_retired_bullets: false

# Feature flags
features:
  multi_user: false
  company_intelligence: true  # Phase 2 - Sprint 12
  application_tracking: false  # Phase 3

# Company enrichment settings (Sprint 12)
company_enrichment:
  enabled: true
  auto_enrich_on_job_parse: true  # Automatically enrich when parsing JD
  website_fetch_timeout: 10  # seconds
  max_response_size: 51200  # 50KB
  cache_duration_hours: 168  # 1 week
  user_agent: "ETPS/1.0 (Company Profile Enrichment)"

  # Industry taxonomy
  industries:
    - Financial Services
    - Technology
    - Healthcare
    - Consulting
    - Manufacturing
    - Retail
    - Government
    - Education
    - Non-Profit
    - Energy
    - Telecommunications
    - Media & Entertainment
    - Real Estate
    - Transportation
    - Other

  # Company size bands
  size_bands:
    - "1-50"
    - "51-200"
    - "201-1000"
    - "1001-5000"
    - "5000+"

  # Culture signal taxonomy
  culture_signals:
    - formal
    - innovative
    - mission-driven
    - collaborative
    - fast-paced
    - customer-centric
    - data-driven
    - experimental
    - conservative
    - traditional

  # AI/Data maturity levels
  ai_maturity_levels:
    - low
    - developing
    - advanced

# Pagination-aware layout settings (PRD 2.11)
# These are heuristic estimates for line budget calculations
pagination:
  # Page capacity in estimated lines
  page1_line_budget: 52        # Page 1 has less space (header, contact info)
  page2_line_budget: 55        # Page 2 has slightly more usable space

  # Character count per line for bullet text estimation
  chars_per_line_estimate: 75  # Based on typical resume font/margin settings

  # Per-role bullet constraints
  min_bullets_per_role: 2      # Minimum bullets for recent/critical roles
  max_bullets_per_role: 6      # Maximum bullets per role

  # Element line costs (used in space estimation)
  section_header_lines: 1      # "EXPERIENCE", "SKILLS", etc.
  job_header_lines: 2          # Company, title, location, dates
  bullet_chrome_lines: 1       # The bullet point marker itself

  # Summary and skills section budgets
  max_summary_lines: 4         # Target max lines for professional summary
  max_skills_lines: 3          # Target max lines for skills section

  # Page split rules
  min_bullets_after_job_header: 2  # If fewer would fit, move job to next page

  # Bullet compression settings
  compression_enabled: true        # Whether to allow bullet compression
  compression_target_reduction: 0.20  # Target ~20% character reduction

  # Space-aware prioritization
  condense_older_roles: true   # Condense older/less relevant roles first
